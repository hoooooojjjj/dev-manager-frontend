---
alwaysApply: true
---

## ë©”íƒ€

- **Rule Name**: User Flow & Feature Implementation Guide
- **Type**: Project Rule (Auto-Attached)
- **Applies To**: Agent, Inline Edit
- **Paths**: í”„ë¡œì íŠ¸ ì „ì²´

## í•µì‹¬ ì›Œí¬í”Œë¡œìš°

**6ë‹¨ê³„ íŒŒì´í”„ë¼ì¸**: Intake â†’ Research â†’ Draft â†’ Review â†’ Prompts â†’ Publish

```
1ï¸âƒ£ Intake (/new) âœ…
   ğŸ“ PRD ì…ë ¥, OAuth ê²€ì¦, Focus Files ì„¤ì •

2ï¸âƒ£ Research (/projects/[id]/research) âœ…
   ğŸ” Brave ê²€ìƒ‰, ì±„ìš©ê³µê³  ë¶„ì„, Competency Map

3ï¸âƒ£ Draft (/drafts/[id]) âœ…
   ğŸ“‹ Dev Spec ìë™ ìƒì„±, ì¸ìš© ì‹œìŠ¤í…œ

4ï¸âƒ£ Review (/drafts/[id]/review) âœ…
   âœï¸ ì„¹ì…˜ë³„ ìˆ˜ì •, Before/After Diff

5ï¸âƒ£ Prompts (/drafts/[id]/prompts) âœ…
   ğŸ¤– AI í”„ë¡¬í”„íŠ¸ ìë™ ìƒì„± (Codegen/Test/Review)

6ï¸âƒ£ Publish
   ğŸ“¤ Notion ìë™ ë°œí–‰ (ë°±ì—”ë“œ êµ¬í˜„ ëŒ€ê¸°)
```

## í˜ì´ì§€ë³„ êµ¬í˜„ ìƒíƒœ

### ğŸ  í™ˆí˜ì´ì§€ (/) âœ…

- **ëª©ì **: ì‹œìŠ¤í…œ ì†Œê°œ, CTA, í”„ë¡œì íŠ¸ ì ‘ê·¼
- **êµ¬í˜„**: ë§ˆì¼€íŒ… ì„¹ì…˜, ê¸°ëŠ¥ ì¹´ë“œ, ìµœê·¼ í”„ë¡œì íŠ¸
- **CTA**: "ìƒˆ í”„ë¡œì íŠ¸ ì‹œì‘", "í”„ë¡œì íŠ¸ ëª©ë¡"

### ğŸ“ Intake í¼ (/new) âœ…

- **ëª©ì **: í”„ë¡œì íŠ¸ ìƒì„±, OAuth ì—°ê²°, íŒŒì¼ ì§€ì •
- **êµ¬í˜„**: React Hook Form + Zod ê²€ì¦, OAuth ë°°ì§€, Focus Files ê´€ë¦¬
- **API**: POST `/api/v1/projects/intake`

### ğŸ“Š í”„ë¡œì íŠ¸ ëª©ë¡ (/projects) âœ…

- **ëª©ì **: ì „ì²´ í”„ë¡œì íŠ¸ ê´€ë¦¬, ê²€ìƒ‰, í•„í„°ë§
- **êµ¬í˜„**: ì¹´ë“œ ê·¸ë¦¬ë“œ, ì‹¤ì‹œê°„ ê²€ìƒ‰, ìƒíƒœ í•„í„°, í˜ì´ì§€ë„¤ì´ì…˜
- **ê¸°ëŠ¥**: ê²€ìƒ‰(ì œëª©/ë ˆí¬), ìƒíƒœë³„ í•„í„°, ì •ë ¬

### ğŸ›ï¸ í”„ë¡œì íŠ¸ ëŒ€ì‹œë³´ë“œ (/projects/[id]) âœ…

- **ëª©ì **: ì‹¤ì‹œê°„ ì§„í–‰ìƒí™© ëª¨ë‹ˆí„°ë§
- **êµ¬í˜„**: íƒ€ì„ë¼ì¸, ì§„í–‰ë¥ , SSE ë¡œê·¸ ìŠ¤íŠ¸ë¦¼, ì•¡ì…˜ ì¹´ë“œ
- **ìƒíƒœ**: 6ë‹¨ê³„ ì‹œê°í™” (queued â†’ publishing)

### ğŸ”¬ ë¦¬ì„œì¹˜ íŒ¨ë„ (/projects/[id]/research) âœ…

- **ëª©ì **: Brave ê²€ìƒ‰ ê²°ê³¼, ì±„ìš©ê³µê³ , Competency Map
- **êµ¬í˜„**: 3íƒ­ êµ¬ì¡°, í•„í„°ë§, KPI ë°°ì§€ ì‹œìŠ¤í…œ
- **íƒ­**: References, Job Postings, Competency Map

### ğŸ“‹ Dev Spec ë·°ì–´ (/drafts/[id]) âœ…

- **ëª©ì **: ìƒì„±ëœ ëª…ì„¸ì„œ í™•ì¸, ì¸ìš© ì¶”ì 
- **êµ¬í˜„**: ìë™ ëª©ì°¨, ì¸ìš© ì‹œìŠ¤í…œ, ì§„í–‰ë¥  í‘œì‹œ
- **ì„¹ì…˜**: TL;DR, í˜„ì¬ë™ì‘, ê·¼ë³¸ì›ì¸, í•´ê²°ë°©ì•ˆ, í•™ìŠµí¬ì¸íŠ¸

### âœï¸ ë¦¬ë·° ì¸í„°í˜ì´ìŠ¤ (/drafts/[id]/review) âœ…

- **ëª©ì **: ì„¹ì…˜ë³„ ìˆ˜ì •, ë³€ê²½ ì¶”ì , ìŠ¹ì¸
- **êµ¬í˜„**: 3ì»¬ëŸ¼ ë ˆì´ì•„ì›ƒ, Diff ë·°, ì—„ê²©í•œ ì¸ìš© ê²€ì¦
- **ê¸°ëŠ¥**: Before/After ë¹„êµ, ë¡¤ë°±, ë²„ì „ ê´€ë¦¬

### ğŸ¤– AI í”„ë¡¬í”„íŠ¸ ë²ˆë“¤ (/drafts/[id]/prompts) âœ…

- **ëª©ì **: ê°œë°œ ì°©ìˆ˜ìš© í”„ë¡¬í”„íŠ¸ ìƒì„±
- **êµ¬í˜„**: 3ì¢… í”„ë¡¬í”„íŠ¸, êµ¬ë¬¸ í•˜ì´ë¼ì´íŒ…, ì›í´ë¦­ ë³µì‚¬
- **ì¢…ë¥˜**: Codegen, Test, Review í”„ë¡¬í”„íŠ¸

## ì£¼ìš” ìƒí˜¸ì‘ìš© íŒ¨í„´

### ğŸ” ê²€ìƒ‰ ë° í•„í„°ë§ âœ…

- **ì‹¤ì‹œê°„ ê²€ìƒ‰**: 300ms ë””ë°”ìš´ì‹±, URL ë™ê¸°í™”
- **ìƒíƒœ í•„í„°**: Select ì»´í¬ë„ŒíŠ¸, ë™ì  í•„í„°ë§
- **ê²°ê³¼ í‘œì‹œ**: ìŠ¤ì¼ˆë ˆí†¤ ë¡œë”©, ë¹ˆ ìƒíƒœ ì²˜ë¦¬

### ğŸ“ í¼ ìƒí˜¸ì‘ìš© âœ…

- **ì‹¤ì‹œê°„ ê²€ì¦**: Zod ìŠ¤í‚¤ë§ˆ, ì—ëŸ¬ ë©”ì‹œì§€
- **OAuth ìƒíƒœ**: ì‹¤ì‹œê°„ ì—°ê²° í™•ì¸, ë°°ì§€ í‘œì‹œ
- **Focus Files**: ë™ì  ì¶”ê°€/ì œê±°, ì¹© UI

### âš¡ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ âœ…

- **SSE ì—°ê²°**: ì§„í–‰ìƒí™© ìŠ¤íŠ¸ë¦¼, ìë™ ì¬ì—°ê²°
- **ìƒíƒœ ë™ê¸°í™”**: TanStack Query ìºì‹œ ì—…ë°ì´íŠ¸
- **ì—ëŸ¬ ë³µêµ¬**: ë„¤íŠ¸ì›Œí¬ ëŠê¹€ ì‹œ ìë™ ë³µêµ¬

### ğŸ¨ UI/UX íŒ¨í„´ âœ…

- **ë¡œë”© ìƒíƒœ**: ìŠ¤ì¼ˆë ˆí†¤, ìŠ¤í”¼ë„ˆ, í”„ë¡œê·¸ë ˆìŠ¤ ë°”
- **ì—ëŸ¬ ì²˜ë¦¬**: í† ìŠ¤íŠ¸, ì—ëŸ¬ ë°”ìš´ë”ë¦¬, ì¬ì‹œë„ ì˜µì…˜
- **ì„±ê³µ í”¼ë“œë°±**: í† ìŠ¤íŠ¸ ì•Œë¦¼, ìƒíƒœ ë³€ê²½ ì• ë‹ˆë©”ì´ì…˜

## ìƒíƒœ ê´€ë¦¬ ì „ëµ

### ì„œë²„ ìƒíƒœ (TanStack Query) âœ…

```typescript
// ìºì‹± ì „ëµ
staleTime: 5 * 1000     // 5ì´ˆê°„ fresh
gcTime: 5 * 60 * 1000   // 5ë¶„ê°„ ìºì‹œ ë³´ê´€
retry: 4xx ì—ëŸ¬ëŠ” ì¬ì‹œë„ ì•ˆí•¨
```

### ë¡œì»¬ UI ìƒíƒœ (Zustand) âœ…

```typescript
// useUi ìŠ¤í† ì–´
- ì‚¬ì´ë“œë°” ìƒíƒœ
- í† ìŠ¤íŠ¸ ì•Œë¦¼ ê´€ë¦¬
- ëª¨ë‹¬ ìƒíƒœ ê´€ë¦¬
```

### URL ìƒíƒœ (SearchParams) âœ…

```typescript
// ê²€ìƒ‰ & í•„í„° ìƒíƒœ URL ë™ê¸°í™”
- ê²€ìƒ‰ ì¿¼ë¦¬
- í•„í„° ì¡°ê±´
- í˜ì´ì§€ë„¤ì´ì…˜
```

## ì ‘ê·¼ì„± êµ¬í˜„ (WCAG 2.1 AA)

### í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ âœ…

- ëª¨ë“  ì¸í„°ë™í‹°ë¸Œ ìš”ì†Œ Tab ìˆœì„œ
- Enter/Space í‚¤ ì•¡ì…˜ ì§€ì›
- Escape í‚¤ë¡œ ëª¨ë‹¬/ë“œë¡­ë‹¤ìš´ ë‹«ê¸°

### ìŠ¤í¬ë¦° ë¦¬ë” ì§€ì› âœ…

- ARIA ë ˆì´ë¸” ë° ì—­í•  ì •ì˜
- `aria-live` ì˜ì—­ìœ¼ë¡œ ë™ì  ì½˜í…ì¸  ì•Œë¦¼
- `aria-expanded`, `aria-selected` ìƒíƒœ í‘œì‹œ

### ì‹œê°ì  ì ‘ê·¼ì„± âœ…

- ìƒ‰ìƒ ëŒ€ë¹„ 4.5:1 ì´ìƒ ìœ ì§€
- í¬ì»¤ìŠ¤ í‘œì‹œ ìŠ¤íƒ€ì¼ ëª…í™•í™”
- `prefers-reduced-motion` ëŒ€ì‘

## ì„±ëŠ¥ ìµœì í™”

### ë¡œë”© ìµœì í™” âœ…

- **ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…**: í˜ì´ì§€ë³„ ìë™ ë¶„í• 
- **ì§€ì—° ë¡œë”©**: ìŠ¤í¬ë¡¤ ê¸°ë°˜ ì»¨í…ì¸  ë¡œë”©
- **ì´ë¯¸ì§€ ìµœì í™”**: Next.js Image ì»´í¬ë„ŒíŠ¸

### ëŸ°íƒ€ì„ ìµœì í™” âœ…

- **ë©”ëª¨ì´ì œì´ì…˜**: React.memo, useMemo, useCallback
- **ê°€ìƒ ìŠ¤í¬ë¡¤**: ëŒ€ëŸ‰ ë°ì´í„° íš¨ìœ¨ ë Œë”ë§ (ì˜ˆì •)
- **ë””ë°”ìš´ì‹±**: ê²€ìƒ‰ ì…ë ¥ ìµœì í™”

### ìºì‹± ì „ëµ âœ…

- **TanStack Query**: SWR íŒ¨í„´ ì ìš©
- **ë¸Œë¼ìš°ì € ìºì‹±**: ì •ì  ìì‚° ì¥ê¸° ìºì‹±
- **ë¡œì»¬ ìŠ¤í† ë¦¬ì§€**: ì‚¬ìš©ì ì„¤ì • ì €ì¥

## ì—ëŸ¬ ì²˜ë¦¬ ì „ëµ

### ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ âœ…

```typescript
// ìë™ ì¬ì‹œë„ ë¡œì§
retry: (failureCount, error) => {
  if (error?.status >= 400 && error?.status < 500) {
    return false; // 4xxëŠ” ì¬ì‹œë„ ì•ˆí•¨
  }
  return failureCount < 3;
};
```

### UI ì—ëŸ¬ âœ…

- **ì—ëŸ¬ ë°”ìš´ë”ë¦¬**: ì»´í¬ë„ŒíŠ¸ ê²©ë¦¬ëœ ë³µêµ¬
- **í† ìŠ¤íŠ¸ ì•Œë¦¼**: ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€
- **ì¬ì‹œë„ ì˜µì…˜**: ì‹¤íŒ¨í•œ ì•¡ì…˜ ì¬ì‹¤í–‰

### ê²€ì¦ ì—ëŸ¬ âœ…

- **ì‹¤ì‹œê°„ ê²€ì¦**: ì…ë ¥ê³¼ ë™ì‹œì— í”¼ë“œë°±
- **í•„ë“œë³„ ì—ëŸ¬**: êµ¬ì²´ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€
- **í¼ ìƒíƒœ ë³µêµ¬**: ìƒˆë¡œê³ ì¹¨ ì‹œ ì…ë ¥ ë‚´ìš© ë³´ì¡´

## MSW ëª¨í‚¹ ì‹œìŠ¤í…œ

### ê°œë°œ í™˜ê²½ ëª¨í‚¹ âœ…

```typescript
// ìƒ˜í”Œ ë°ì´í„°
- 4ê°œ ë‹¤ì–‘í•œ ìƒíƒœ í”„ë¡œì íŠ¸
- OAuth ì—°ê²° ì‹œë®¬ë ˆì´ì…˜
- ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¼
- ì—ëŸ¬ ì¼€ì´ìŠ¤ ì‹œë®¬ë ˆì´ì…˜
```

### API ì‘ë‹µ êµ¬ì¡° âœ…

```typescript
// í‘œì¤€ ì‘ë‹µ í˜•ì‹
{
  data: T,
  correlationId: string,
  timestamp?: string
}

// ì—ëŸ¬ ì‘ë‹µ (ProblemDetails)
{
  type: string,
  title: string,
  status: number,
  correlationId: string
}
```

## ë°°í¬ ë° CI/CD

### Vercel ë°°í¬ âœ…

- **ìë™ ë°°í¬**: main ë¸Œëœì¹˜ í‘¸ì‹œ ì‹œ
- **í”„ë¦¬ë·° ë°°í¬**: PR ìƒì„± ì‹œ
- **í™˜ê²½ ë³€ìˆ˜**: ê¸°ë³¸ê°’ `/api/v1` ì„¤ì •

### GitHub Actions âœ…

- **í’ˆì§ˆ ê²€ì¦**: TypeScript + ESLint + í…ŒìŠ¤íŠ¸
- **ë¹Œë“œ ê²€ì¦**: í”„ë¡œë•ì…˜ ë¹Œë“œ í…ŒìŠ¤íŠ¸
- **E2E í…ŒìŠ¤íŠ¸**: Playwright ìë™ ì‹¤í–‰

## í–¥í›„ í™•ì¥ ê³ ë ¤ì‚¬í•­

### ê¸°ëŠ¥ í™•ì¥

- **ë‹¤êµ­ì–´ ì§€ì›**: next-intl ì¶”ê°€
- **ì‹¤ì‹œê°„ í˜‘ì—…**: WebSocket ê¸°ë°˜ ë©€í‹°ìœ ì €
- **ì˜¤í”„ë¼ì¸ ì§€ì›**: Service Worker + ìºì‹œ

### ì„±ëŠ¥ í™•ì¥

- **ì„œë²„ ì»´í¬ë„ŒíŠ¸**: ë” ë§ì€ SSR í™œìš©
- **ìŠ¤íŠ¸ë¦¬ë°**: React 18 Suspense ìŠ¤íŠ¸ë¦¬ë°
- **CDN ìµœì í™”**: ì •ì  ìì‚° ê¸€ë¡œë²Œ ë°°í¬

### ëª¨ë‹ˆí„°ë§ í™•ì¥

- **ì„±ëŠ¥ ì¶”ì **: Web Vitals ìˆ˜ì§‘
- **ì—ëŸ¬ ì¶”ì **: Sentry í†µí•©
- **ì‚¬ìš©ì ë¶„ì„**: Google Analytics ì—°ë™
